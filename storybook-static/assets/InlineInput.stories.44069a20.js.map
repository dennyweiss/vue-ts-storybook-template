{"version":3,"file":"InlineInput.stories.44069a20.js","sources":["../../src/components/InlineInput.vue"],"sourcesContent":["<template>\n  <textarea\n    v-if=\"editing && multiline\"\n    ref=\"inputEl\"\n    class=\"h-full w-full resize-none border-0 bg-transparent p-0 focus:outline-none focus:ring-0 focus-visible:outline-none\"\n    :class=\"[$attrs.class, componentName]\"\n    type=\"textarea\"\n    wrap=\"hard\"\n    :maxlength=\"maxlength\"\n    :value=\"computedValue\"\n    :placeholder=\"computedPlaceholder\"\n    rows=\"1\"\n    @keydown.enter.stop=\"handleKeyDownEnter\"\n    @blur=\"handleInputChanged\"\n    @input=\"resizeTextArea($event.target)\"\n  />\n  <input\n    v-if=\"editing && !multiline\"\n    ref=\"inputEl\"\n    class=\"m-0 w-full border-0 bg-transparent p-0 focus:outline-none focus:ring-0 focus-visible:outline-none\"\n    :class=\"[$attrs.class, componentName]\"\n    type=\"text\"\n    :value=\"computedValue\"\n    :placeholder=\"computedPlaceholder\"\n    :maxlength=\"maxlength\"\n    @keydown.enter.stop=\"handleKeyDownEnter\"\n    @blur=\"handleInputChanged\"\n  />\n  <div\n    v-if=\"!editing\"\n    ref=\"labelEl\"\n    class=\"hyphens-auto w-full overflow-hidden break-words hover:cursor-text hover:text-gray-600\"\n    :class=\"[\n      $attrs.class,\n      multiline ? 'line-clamp-' + maxLines : 'truncate',\n      componentName,\n    ]\"\n    @click=\"editByInlineClick ? toggle() : null\"\n  >\n    {{ computedLabel }}\n  </div>\n  <span\n    v-if=\"!editByInlineClick\"\n    class=\"inline-block w-fit text-secondary-content underline\"\n    :class=\"$attrs.class\"\n    @click.stop=\"toggle\"\n  >\n    {{ actionTitle }}\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  nextTick,\n  ref,\n  onMounted,\n  onUpdated,\n  watch,\n  defineComponent,\n} from 'vue'\n\nconst componentName = 'InlineInput'\n\nexport default defineComponent({\n  props: {\n    value: {\n      type: String,\n      default: () => '',\n    },\n    placeholder: {\n      type: String,\n      default: () => '',\n    },\n    maxLines: {\n      type: Number,\n      default: () => 5,\n    },\n    maxlength: {\n      type: Number,\n      default: () => 144,\n    },\n    multiline: {\n      type: Boolean,\n      default: true,\n    },\n    editByInlineClick: {\n      type: Boolean,\n      default: true,\n    },\n    focusOnMount: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  emits: [\n    'inline-input-changed',\n    'inline-input-is-editing',\n    'inline-input-stopped-editing',\n    'inline-input-keydown-enter',\n  ],\n  setup(props, { emit }) {\n    const editing = ref(false)\n    const labelEl = ref<HTMLLabelElement>()\n    const inputEl = ref<HTMLInputElement>()\n\n    const actionTitle = ref('edit')\n\n    watch(editing, async () => {\n      actionTitle.value = editing.value === false ? 'edit' : 'save'\n    })\n\n    const toggle = async () => {\n      editing.value = !editing.value\n\n      if (editing.value) {\n        emit('inline-input-is-editing', {\n          componentName: componentName,\n          isEditing: editing.value,\n          value: inputEl?.value?.value ?? '',\n        })\n\n        await nextTick(() => {\n          if (props.multiline) {\n            resizeTextArea(inputEl.value!)\n          }\n\n          inputEl?.value?.focus()\n          inputEl?.value?.select()\n        })\n      }\n\n      if (!editing.value) {\n        emit('inline-input-stopped-editing', {\n          componentName: componentName,\n          isEditing: editing.value,\n          value: inputEl?.value?.value ?? '',\n        })\n      }\n    }\n\n    const handleKeyDownEnter = (event: Event) => {\n      event.preventDefault()\n      inputEl?.value?.blur()\n      emit('inline-input-keydown-enter', event)\n    }\n\n    const handleInputChanged = (event: Event) => {\n      if (props.editByInlineClick === true) {\n        toggle()\n      }\n\n      if ((event.target as HTMLInputElement).value !== computedValue.value) {\n        emit('inline-input-changed', {\n          componentName: componentName,\n          event: event,\n        })\n      }\n    }\n\n    const computedLabel = computed(() => {\n      return props.value === '' ? props.placeholder : props.value\n    })\n\n    const computedValue = computed(() => props.value)\n\n    const computedPlaceholder = computed(() => props.placeholder)\n\n    const resizeTextArea = (element?: EventTarget | null) => {\n      if (!element || !(element instanceof HTMLElement)) {\n        return\n      }\n      element.style.height = 'auto'\n      element.style.height = `${element.scrollHeight}px`\n    }\n\n    onMounted(() => {\n      if (props.focusOnMount && editing.value === false) {\n        toggle()\n        //resizeTextArea(inputEl?.value)\n      }\n    })\n\n    onUpdated(() => {\n      if (props.focusOnMount && editing.value === false) {\n        toggle()\n        //resizeTextArea(inputEl?.value)\n      }\n    })\n\n    return {\n      componentName,\n      resizeTextArea,\n      labelEl,\n      inputEl,\n      computedLabel,\n      editing,\n      computedValue,\n      computedPlaceholder,\n      handleInputChanged,\n      handleKeyDownEnter,\n      toggle,\n      actionTitle,\n    }\n  },\n})\n</script>\n"],"names":["componentName","_sfc_main","defineComponent","props","emit","editing","ref","labelEl","inputEl","actionTitle","watch","toggle","_b","_a","nextTick","resizeTextArea","_d","_c","handleKeyDownEnter","event","handleInputChanged","computedValue","computedLabel","computed","computedPlaceholder","element","onMounted","onUpdated","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_createElementBlock","_Fragment","_openBlock","_normalizeClass","_withKeys","_withModifiers","args","_createCommentVNode","_hoisted_2","_toDisplayString"],"mappings":"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"}